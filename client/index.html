<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width">
	<script src="lib/vue.min.js"></script>
	<script src="lib/lodash.min.js"></script>
	<script src="https://unpkg.com/vuefire/dist/vuefire.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
	<script src="js/script.js"></script>

	<link rel="stylesheet" href="css/style.css">

	<link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
	<script src="//unpkg.com/vue/dist/vue.js"></script>
	<script src="//unpkg.com/element-ui/lib/index.js"></script>
	<script src="//unpkg.com/element-ui@2.4.11/lib/index.js"></script>

	<title>Gestionnaire restaurants VueJS</title>
</head>

<body>
	<div id="app">

		<el-dialog id="popup" title="Modification du restaurant" :visible.sync="visible" width="30%">
			<label>
				Nom : 
				<el-input type="text" required v-model="restaurantMaj.name"></el-input>
			</label></br>
			<label>
				Cuisine : 
				<el-input type="text" required v-model="restaurantMaj.cuisine"></el-input>
			</label></br>
			<span slot="footer" class="dialog-footer">
				<el-button type="primary" @click="modifierRestaurant()">Valider</el-button>
				<el-button @click="annulerModification">Annuler</el-button>
			</span>
		</el-dialog>
	
		<h1>Le Guide des Resto</h1>

		<el-input
			prefix-icon="el-icon-search"
			placeholder="Rechercher un restaurant..." 
			v-on:input="chercherRestaurants" 
			v-model="nomRecherche"
			clearable>
		</el-input>

		<h2>Nombre de restaurants trouvÃ©s : {{nbRestaurantsMax}}</h2>

		<label>
			<input 
				type="range" 
				min="5" max="100" step="5" 
				v-model="pagesize" 
				v-on:input="changeNbRestauParPage">
			{{pagesize}} restaurants par page
		</label>

		<table>
			<thead>
				<tr>
					<th>
						<el-input class="inputModif" type="text" required clearable v-model="name"></el-input>
					</th>
					<th>
						<el-input class="inputModif" type="text" required clearable v-model="cuisine"></el-input>
					</th>
					<th>
						<el-tooltip content="Ajouter" placement="top">
							<el-button 
								icon="el-icon-plus"
								size="small"
								v-on:click="ajouterRestaurant">
							</el-button>
						</el-tooltip>
					</th>
				</tr>
				<tr>
					<th>Nom</th>
					<th>Cuisine </th>
					<th>Action </th>
				</tr>
			</thead>
			<tbody>
				<tr v-for="r,index in restaurants"    
					v-bind:style="{backgroundColor:getColor(index)}">
					<td>{{r.name}}</td>
					<td> {{r.cuisine}}</td>
					<td><el-button-group>
						<el-tooltip content="Modifier" placement="top">
							<el-button 
								class="btn"
								size="small"
								icon="el-icon-edit"
								@click="ouvrirPopUp(r)">
							</el-button>
						</el-tooltip>
						<el-tooltip content="Supprimer" placement="top">
							<el-button 	
								class="btn" 
								size="small"
								icon="el-icon-close"
								@click="supprimerRestaurant(r)">
							</el-button>
						</el-tooltip>
					</el-button-group></td>
				</tr>
			</tbody>
			<tfoot>
				<tr><td colspan="3">
					<el-row>
						<el-button-group>
							<el-button  
								icon="el-icon-d-arrow-left"
								size="small"
								v-on:click="premierePage"
								v-bind:disabled="page<=0"></el-button>
							<el-button 
								icon="el-icon-arrow-left"
								size="small"
								v-on:click="pagePrecedente"
								v-bind:disabled="page<=0"></el-button>
						</el-button-group>
						<input 
							type="number" 
							v-model="page"
							v-on:input="getRestaurantsFromServer">
						<el-button-group>
							<el-button 
								icon="el-icon-arrow-right"
								size="small"
								v-on:click="pageSuivante"
								v-bind:disabled="page>=nbPagesMax"></el-button>
							<el-button 
								icon="el-icon-d-arrow-right"
								size="small"
								v-on:click="dernierePage"
								v-bind:disabled="page>=nbPagesMax"></el-button>
						</el-button-group>
					</el-row>
				</td></tr>
			</tfoot>
		</table>

		

	</div>

</body>
</html>